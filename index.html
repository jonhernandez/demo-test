<!DOCTYPE html>
<html lang="en-US">
  <head>
    <!-- Google Tag Manager - Main -->
    <script>
      (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-KBFF27D');
    </script>
    <!-- End Google Tag Manager -->

    <!-- Google Tag Manager - Partner Demo-->
    <!-- <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-MZ9KLT4');
    </script> -->
    <!-- End Google Tag Manager -->

    <!-- standalone gtag script-->
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <!-- Matching reveal-gtag -> ga code block in the body -->
    <!-- <script async src="https://www.googletagmanager.com/gtag/js?id=UA-140690463-2"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-140690463-2');
    </script> -->
    <!-- End standalone gtag-->

    <meta charset="utf-8">

    <title>Clearbit Demo and Testing Page</title>
    <link rel="icon" href="https://theme.zdassets.com/theme_assets/978257/920c5dc523ca1bb76148e7a4908249c54dddf234.png">

    <style>
      .container { width: 100%; text-align: center; }
      .container img { height: 250px; }
      .container button { margin: 15px 0; text-transform: uppercase; font-size: 1.10em; padding: 5px; }
    </style>
    <!-- testing null change  -->
    <script></script>
  </head>

  <body>
    <!-- Google Tag Manager (noscript) - Main -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KBFF27D"
      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <!-- Google Tag Manager (noscript) - Partner Demo -->
    <!-- <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MZ9KLT4"
      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript> -->
    <!-- End Google Tag Manager (noscript) -->
    <div class="navigation">
      <a href="index.html">Home</a>
      <a href="xforms.html">X-Forms</a>
      <a href="segment.html">Segment</a>
      <a href="datalayer_optimize.html">Datalayer & Optimize</a>
      <a href="intercom.html">Intercom</a>
    </div>
    <div class="container">
      <img src="https://cl.ly/719bff4b76ec/default_hero.jpg">
    </div>
    <div class="container">
      <button>sign up</button>
    </div>
    <!-- regular mkto form with dynamic enrichment -->
    <script src="//app-ab32.marketo.com/js/forms2/js/forms2.js"></script>
    <form id="mktoForm_1091"></form>
    <script>MktoForms2.loadForm("https://app-ab32.marketo.com", "797-LZE-483", 1091);</script>
    <!-- End regular mkto form -->

    <!-- Begin single-field form for reveal testing -->
    <!-- <script src="//app-ab32.marketo.com/js/forms2/js/forms2.min.js"></script>
    <form id="mktoForm_1190"></form>
    <script>MktoForms2.loadForm("//app-ab32.marketo.com", "797-LZE-483", 1190);</script> -->
    <!-- end single-field form -->

    <!-- Begin form for testing autofill functionality -->
    <!-- <script src="//app-ab32.marketo.com/js/forms2/js/forms2.min.js"></script>
    <form id="mktoForm_1183"></form>
    <script>MktoForms2.loadForm("//app-ab32.marketo.com", "797-LZE-483", 1183);</script> -->
    <!-- End form for testing autofill functionality -->

    <script async src="https://marketo.clearbit.com/assets/v1/marketo/forms.js" data-clearbit-publishable-key="pk_6bb1103d8825e32f7139e4988ce0833e"></script> 
    
    <!-- <script type="text/javascript" src="https://clearbitjs.com/v1/x/forms.js"></script>
    <div class="clearbit-form" data-form-id="632929e6-4532-4d82-b75a-5637ba11adcf" data-theme="default" ></div> -->

    <!-- Reveal into GA via analytics.js for property UA-140690463-2-->
    <!-- <script>
      var gaConfig = function(){
        var revealTrackingIds = ["UA-140690463-2"];
        var ga_trackers=[];
        ga(function(){
          ga.getAll().forEach(function(x,i){
            if(revealTrackingIds.indexOf(x.get('trackingId')) !== -1) {
              ga_trackers.push(x.get('name'))
            }
          });
          ga_trackers.forEach(function(gaName){
            ga(gaName + '.require', 'Clearbit', {
              "mapping": {
                "type":"dimension3",
                "companyName":"dimension4",
                "companyDomain":"dimension5",
                "companyIndustry":"dimension6",
                "companySubIndustry":"dimension7",
                "companyEmployeesRange":"dimension8",
                "companyEstimatedAnnualRevenue":"dimension9",
                "companyAlexaRank":"dimension10",
                "companyCity":"dimension11",
                "companyState":"dimension12",
                "companyCountry":"dimension13",
                "companySicCode":"dimension14",
                "companyTech":"dimension15"
              }
            });
          })
        });
      };
      let gaPollStart = Date.now()
      let gaPoll = setInterval(function() {
        if (typeof window.ga !== 'undefined') {
          clearInterval(gaPoll);
          gaConfig();
          var s = document.createElement("script");
          s.type = "text/javascript";
          s.src = "https://ga.clearbit.com/v1/ga.js?authorization=pk_5fdce9b9374f2f8a4f8c9f4a1546fa35";
          document.body.appendChild(s);
        }
        else if(Date.now() - gaPollStart > 2000) {
          clearInterval(gaPoll);
        }
      }, 100);
    </script> -->
    <!-- End Reveal into GA via analytics.js-->

    <!-- Reveal into GA via gtag.js-->
    <!-- <script src="https://reveal.clearbit.com/v1/companies/reveal?authorization=pk_5fdce9b9374f2f8a4f8c9f4a1546fa35&variable=reveal"></script>
    <script>
      let reveal_gtag_map = {
        'send_page_view': false,
        'custom_map': {
          'dimension1': 'type',
          'dimension2': 'companyName',
          'dimension3': 'companyDomain',
          'dimension4': 'companyIndustry',
          'dimension5': 'companySubIndustry',
          'dimension6': 'companyEmployeesRange',
          'dimension7': 'companyEstimatedAnnualRevenue',
          'dimension8': 'companyAlexaRank',
          'dimension9': 'companyCity',
          'dimension10': 'companyState',
          'dimension11': 'companyCountry',
          'dimension12': 'companySicCode',
          'dimension13': 'companyTech'
        }
      }
      
      // This line configures the tracking ID with the mapping
      gtag('config', 'UA-140690463-2', reveal_gtag_map);
      
      let reveal_data_map = {};
      let nonCompany = "(Non-Company)";
      
      if(reveal === null || reveal.company === null) {
        reveal_data_map = {
          'non_interaction': true,
          'type': reveal ? reveal.type : nonCompany,
          'companyName':nonCompany,
          'companyDomain':nonCompany,
          'companyIndustry':nonCompany,
          'companySubIndustry':nonCompany,
          'companyEmployeesRange':nonCompany,
          'companyEstimatedAnnualRevenue':nonCompany,
          'companyAlexaRank':nonCompany,
          'companyCity':nonCompany,
          'companyState':nonCompany,
          'companyCountry':nonCompany,
          'companySicCode':nonCompany,
          'companyTech':nonCompany
        };
      }
      else {
        let company = reveal.company;
      
        reveal_data_map = {
          'non_interaction': true,
          'type':reveal.type,
          'companyName':company.name,
          'companyDomain':company.domain,
          'companyIndustry':company.category.industry,
          'companySubIndustry':company.category.subIndustry,
          'companyEmployeesRange':company.metrics.employeesRange,
          'companyEstimatedAnnualRevenue':company.metrics.estimatedAnnualRevenue,
          'companyAlexaRank':company.metrics.alexaGlobalRank,
          'companyCity':company.geo.city,
          'companyState':company.geo.state,
          'companyCountry':company.geo.country,
          'companySicCode':company.category.sicCode,
          'companyTech':company.tech
        };
      }
      
      gtag('event', 'Clearbit', reveal_data_map);
    </script> -->
    <!--End Reveal to GA via gtag.js-->  

    <!-- Reveal Personalization -->
    <!-- <script async src="https://reveal.clearbit.com/v1/companies/reveal?variable=reveal&authorization=pk_5fdce9b9374f2f8a4f8c9f4a1546fa35"></script> -->

    <!-- testing reveal w/ GA analytics.js and optimize -->
    <script>
      ga(function(){
        var revealTrackingIds = ["UA-140690463-2"]; //replace
        var ga_trackers=[];
        ga.getAll().forEach(function (x, i) {
          if (revealTrackingIds.indexOf(x.get('trackingId')) !== -1) {
            ga_trackers.push(x.get('name'))
          }
        });
        ga_trackers.forEach(function (gaName) {
          ga(gaName + '.require', 'Clearbit', {
            "mapping": {
              "type":"dimension3",
              "companyName":"dimension4",
              "companyDomain":"dimension5",
              "companyIndustry":"dimension6",
              "companySubIndustry":"dimension7",
              "companyEmployeesRange":"dimension8",
              "companyEstimatedAnnualRevenue":"dimension9",
              "companyAlexaRank":"dimension10",
              "companyCity":"dimension11",
              "companyState":"dimension12",
              "companyCountry":"dimension13",
              "companySicCode":"dimension14",
              "companyTech":"dimension15"
            }
          });
        })
      });
    </script>

    <script>
      function clearbitCallback(response){
        window.reveal = response;
      
        (function() {
          var Clearbit, providePlugin,
            bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };
        
          providePlugin = function(pluginName, pluginConstructor) {
            var tryApply = function() {
              var ga = window[window['GoogleAnalyticsObject'] || 'ga'];
        
              if (typeof ga === 'function') {
                ga('provide', pluginName, pluginConstructor);
                return true;
              } else {
                return false;
              }
            }
        
            if (tryApply()) {
              // Native support
            } else if (window.analytics && typeof window.analytics.ready === 'function') {
              // Segment support
              analytics.ready(tryApply);
            } else {
              console.error("Clearbit error: 'ga' variable not found.");
            }
          };
        
          Clearbit = (function() {
              function Clearbit(tracker, config) {
                this.tracker = tracker;
                this.config = config != null ? config : {};
                this.triggerEvent = bind(this.triggerEvent, this);
                this.setIPDimensions = bind(this.setIPDimensions, this);
                this.setDimensions = bind(this.setDimensions, this);
                this.set = bind(this.set, this);
                this.done = bind(this.done, this);
                this.mapping = this.config.mapping || {};
                this.done(reveal);
              }
              Clearbit.prototype.done = function(response) {
                  if (response) {
                    this.setIPDimensions(response);
                    if (response.company){
                        this.setDimensions(response.company);
                    }
                    return this.triggerEvent();
                }
              };
                Clearbit.prototype.set = function(key, value) {
                if (key && value) {
                  return this.tracker.set(key, value);
                }
              };
                Clearbit.prototype.setIPDimensions = function(response) {
                if (typeof response.type !== 'undefined') {
                  this.set(this.mapping.type, response.type)
                }
              }
        
            Clearbit.prototype.setDimensions = function(company) {
              var ref, ref1;
              this.set(this.mapping.companyName, company.name);
              this.set(this.mapping.companyDomain, company.domain);
              this.set(this.mapping.companyType, company.type);
              this.set(this.mapping.companyTags, (ref = company.tags) != null ? ref.join(',') : void 0);
              this.set(this.mapping.companyTech, (ref1 = company.tech) != null ? ref1.join(',') : void 0);
              this.set(this.mapping.companySector, company.category.sector);
              this.set(this.mapping.companyIndustryGroup, company.category.industryGroup);
              this.set(this.mapping.companyIndustry, company.category.industry);
              this.set(this.mapping.companySubIndustry, company.category.subIndustry);
              this.set(this.mapping.companySicCode, company.category.sicCode);
              this.set(this.mapping.companyNaicsCode, company.category.naicsCode);
              this.set(this.mapping.companyCountry, company.geo.countryCode);
              this.set(this.mapping.companyState, company.geo.stateCode);
              this.set(this.mapping.companyCity, company.geo.city);
              this.set(this.mapping.companyFunding, company.metrics.raised);
              this.set(this.mapping.companyEstimatedAnnualRevenue, company.metrics.estimatedAnnualRevenue);
              this.set(this.mapping.companyEmployeesRange, company.metrics.employeesRange);
              this.set(this.mapping.companyEmployees, company.metrics.employees);
              return this.set(this.mapping.companyAlexaRank, company.metrics.alexaGlobalRank);
            };
        
            Clearbit.prototype.triggerEvent = function() {
              return this.tracker.send(
                'event',
                'Clearbit',
                'Enriched',
                'Clearbit Enriched',
                {nonInteraction: true}
              );
            };
        
            return Clearbit;
        
          })();
          providePlugin('Clearbit', Clearbit);
        }).call(this);
        return true
      }
    </script>
      
    <!-- replace PK below -->
    <script src="https://reveal.clearbit.com/v1/companies/reveal?authorization=pk_5fdce9b9374f2f8a4f8c9f4a1546fa35&callback=clearbitCallback">
    </script>

  </body>
</html>
